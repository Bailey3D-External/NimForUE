import std/[os, strutils, options, strformat, json, jsonUtils]
import sugar
import nimforueconfig

#TODO Move this
func isEmpty*[T](s:seq[T]) : bool = s.len == 0

func tryParseInt*(s:string) : Option[int] =
    try:
      return some(s.parseInt())
    except:
      return none(int)



proc generateFFIGenFile*() = 
  let genFilePath = getNimForUEConfig().genFilePath
  let content = fmt"""

#AUTOGENERATED FILE. DO NOT EDIT.

import locks
import std/dynlib
import hostbase


"""
  # if nnot fileExists(genFilePath):
    
  writeFile(genFilePath, content)

proc generateUBTScriptFile*() =
  let pluginDir = getCurrentDir()
  let content = fmt(""" cd {pluginDir} && nimble host""") #only ffi to avoid chicken egg problem
  let filename = if defined Windows: "buildlibs.bat" else: "buildlibs.sh"
  writeFile(pluginDir/"src/buildscripts"/filename, content)
